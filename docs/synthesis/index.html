<!DOCTYPE html>
<html lang="de">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>HerData Synthese - Prosopographische Datenexploration</title>

    <!-- noUiSlider CSS -->
    <link rel="stylesheet" href="https://unpkg.com/nouislider@15.7.1/dist/nouislider.min.css" />

    <link rel="stylesheet" href="css/styles.css">
</head>
<body>
    <!-- Global Navigation Placeholder -->
    <div id="navbar-placeholder"></div>

    <div class="app-container">

        <!-- Main three-column layout -->
        <main class="main-layout">
            <!-- Left: Filter Panel -->
            <aside class="filter-panel">
                <h2>Filter</h2>

                <!-- KPI Cards -->
                <div class="stats-cards">
                    <div class="stat-card">
                        <div class="stat-value" id="kpi-persons">448</div>
                        <div class="stat-label">Frauen</div>
                    </div>
                    <div class="stat-card">
                        <div class="stat-value" id="kpi-letters">15.312</div>
                        <div class="stat-label">Briefe</div>
                    </div>
                    <div class="stat-card">
                        <div class="stat-value" id="kpi-places">227</div>
                        <div class="stat-label">Orte</div>
                    </div>
                </div>

                <div class="filter-section">
                    <h3>Suche</h3>
                    <input type="text" id="search-input" placeholder="Name suchen..." data-tooltip="Nach Personennamen filtern">
                </div>

                <div class="filter-section">
                    <h3 data-tooltip="Auswahl nach Rolle in der Korrespondenz">Rolle</h3>
                    <div class="filter-group">
                        <label data-tooltip="Frauen, die Briefe verfasst haben"><input type="checkbox" value="sender" checked> Absenderin</label>
                        <label data-tooltip="Frauen, die in Briefen erwähnt wurden"><input type="checkbox" value="mentioned" checked> Erwähnt</label>
                        <label data-tooltip="Frauen, die sowohl Briefe schrieben als auch erwähnt wurden"><input type="checkbox" value="both" checked> Beides</label>
                        <label data-tooltip="Frauen nur aus biografischen Quellen (SNDB), nicht in Briefen"><input type="checkbox" value="indirect" checked> Nur SNDB</label>
                    </div>
                </div>

                <div class="filter-section">
                    <h3>Zeitfilter</h3>
                    <div class="time-filter-tabs">
                        <button class="time-filter-tab active" data-mode="correspondence">Korrespondenz</button>
                        <button class="time-filter-tab" data-mode="lifespan">Lebensdaten</button>
                    </div>
                    <div id="synthesis-year-range-slider"></div>
                    <div class="year-range-display">
                        <span id="synthesis-year-range-text">1762 – 1824</span>
                    </div>
                </div>

                <div class="filter-section">
                    <h3 data-tooltip="Nach Normdaten-Quelle filtern">Normierung</h3>
                    <div class="filter-group">
                        <label data-tooltip="Gemeinsame Normdatei der Deutschen Nationalbibliothek"><input type="checkbox" value="gnd" checked> GND</label>
                        <label data-tooltip="Schweizerisches Nationalbiografisches Datenbuch"><input type="checkbox" value="sndb" checked> SNDB</label>
                    </div>
                </div>

                <div class="filter-section">
                    <button id="reset-filters" class="btn-reset" data-tooltip="Alle Filter auf Standardwerte zurücksetzen">Filter zurücksetzen</button>
                </div>
            </aside>

            <!-- Center: Data Table -->
            <section class="data-table-container">
                <div class="table-wrapper">
                    <table id="data-table">
                        <thead>
                            <tr id="table-headers">
                                <!-- Dynamic headers based on mode -->
                            </tr>
                        </thead>
                        <tbody id="table-body">
                            <!-- Dynamic rows -->
                        </tbody>
                    </table>
                </div>
            </section>

            <!-- Right: Detail/Context Panel -->
            <aside class="detail-panel">
                <div class="panel-tabs">
                    <button class="tab-btn active" data-tab="person" data-tooltip="Details zur ausgewählten Person">Person</button>
                    <button class="tab-btn" data-tab="wissenskorb" data-tooltip="Gesammelte Personen für Vergleiche und Export">
                        Wissenskorb <span id="basket-count" class="basket-badge">0</span>
                    </button>
                </div>

                <div class="panel-content">
                    <!-- Person Tab -->
                    <div class="tab-content active" id="tab-person">
                        <div id="person-detail" class="person-detail">
                            <p class="empty-state">Wähle eine Person aus der Tabelle</p>
                        </div>
                    </div>

                    <!-- Wissenskorb Tab -->
                    <div class="tab-content" id="tab-wissenskorb">
                        <h3>Wissenskorb</h3>
                        <p class="help-text">Sammle Personen mit dem ⭐ Button</p>

                        <div id="basket-content">
                            <p class="empty-state">Noch keine Personen im Korb</p>
                        </div>

                        <div id="basket-actions" style="display: none;">
                            <hr>
                            <h4>Export</h4>
                            <button id="export-basket-csv" class="btn-export" data-tooltip="Exportiere gesammelte Personen als CSV-Tabelle">Als CSV exportieren</button>
                            <button id="export-basket-json" class="btn-export" data-tooltip="Exportiere gesammelte Personen als JSON-Datei">Als JSON exportieren</button>
                            <button id="clear-basket" class="btn-clear" data-tooltip="Alle Personen aus dem Wissenskorb entfernen">Korb leeren</button>
                        </div>
                    </div>
                </div>
            </aside>
        </main>

        <!-- Footer Legend -->
        <footer class="app-footer">
            <div class="footer-content">
                <span class="footer-label">Rollen:</span>
                <span class="role-badge sender">Absenderin</span> = Briefautorin •
                <span class="role-badge mentioned">Erwähnt</span> = in Briefen erwähnt •
                <span class="role-badge both">Beides</span> = Absenderin & erwähnt •
                <span class="role-badge indirect">SNDB</span> = nur biografische Datenbank
            </div>
        </footer>
    </div>

    <!-- noUiSlider JS -->
    <script src="https://unpkg.com/nouislider@15.7.1/dist/nouislider.min.js"></script>

    <script type="module" src="js/app.js"></script>
</body>
</html>
