<!DOCTYPE html>
<html lang="de">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>HerData Personen - Prosopographische Datenexploration</title>

    <!-- noUiSlider CSS -->
    <link rel="stylesheet" href="https://unpkg.com/nouislider@15.7.1/dist/nouislider.min.css" />

    <!-- Font Awesome Icons -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.1/css/all.min.css" />

    <link rel="stylesheet" href="../css/style.css">
    <link rel="stylesheet" href="../css/search.css">
    <link rel="stylesheet" href="css/styles.css">
</head>
<body>
    <!-- Global Navigation Placeholder -->
    <div id="navbar-placeholder"></div>

    <div class="app-container">

        <!-- Main three-column layout -->
        <main class="main-layout">
            <!-- Left: Filter Panel -->
            <aside class="filter-panel">
                <!-- KPI Cards -->
                <div class="stats-cards">
                    <a href="../stats.html" class="stat-card stat-card-link" data-tooltip="Zum Brief-Explorer">
                        <div class="stat-value" id="kpi-letters">15.312</div>
                        <div class="stat-label">Briefe</div>
                    </a>
                    <a href="index.html" class="stat-card stat-card-link" data-tooltip="Detaillierte Personenliste">
                        <div class="stat-value" id="kpi-persons">448</div>
                        <div class="stat-label">Frauen</div>
                    </a>
                    <a href="../places.html" class="stat-card stat-card-link" data-tooltip="Zur Ortsliste">
                        <div class="stat-value" id="kpi-places">227</div>
                        <div class="stat-label">Orte</div>
                    </a>
                </div>

                <div class="filter-section">
                    <h3 data-tooltip="Auswahl nach Rolle in der Korrespondenz">Rolle</h3>
                    <div class="filter-group">
                        <label data-tooltip="Frauen, die Briefe verfasst haben"><input type="checkbox" value="sender" checked> Absenderin</label>
                        <label data-tooltip="Frauen, die in Briefen erwähnt wurden"><input type="checkbox" value="mentioned" checked> Erwähnt</label>
                        <label data-tooltip="Frauen, die sowohl Briefe schrieben als auch erwähnt wurden"><input type="checkbox" value="both" checked> Beides</label>
                        <label data-tooltip="Frauen nur aus biografischen Quellen (SNDB), nicht in Briefen"><input type="checkbox" value="indirect" checked> Nur SNDB</label>
                    </div>
                </div>

                <div class="filter-section">
                    <h3>Zeitfilter</h3>
                    <div class="time-filter-tabs">
                        <button class="time-filter-tab active" data-mode="correspondence">Korrespondenz</button>
                        <button class="time-filter-tab" data-mode="lifespan">Lebensdaten</button>
                    </div>
                    <div id="synthesis-year-range-slider"></div>
                    <div class="year-range-display">
                        <span id="synthesis-year-range-text">1762 – 1824</span>
                    </div>
                </div>

                <div class="filter-section">
                    <h3 data-tooltip="Nach Normdaten-Quelle filtern">Normierung</h3>
                    <div class="filter-group">
                        <label data-tooltip="Gemeinsame Normdatei der Deutschen Nationalbibliothek"><input type="checkbox" value="gnd" checked> GND</label>
                        <label data-tooltip="Schweizerisches Nationalbiografisches Datenbuch"><input type="checkbox" value="sndb" checked> SNDB</label>
                    </div>
                </div>

                <div class="filter-section">
                    <button id="reset-filters" class="btn-reset" data-tooltip="Alle Filter auf Standardwerte zurücksetzen">Filter zurücksetzen</button>
                </div>
            </aside>

            <!-- Center: Data Table -->
            <section class="data-table-container">
                <!-- Table Header / Toolbar -->
                <div class="table-toolbar" style="padding: 12px 16px; background: var(--color-bg-alt); border-bottom: 1px solid var(--color-border); display: flex; justify-content: space-between; align-items: center; flex-wrap: wrap; gap: 10px;">
                     <div class="result-count" style="font-weight: 600; color: var(--color-text);"><span id="visible-count">448</span> Personen</div>
                     <div class="table-legend" style="font-size: 0.8rem; color: var(--color-text-muted); display: flex; gap: 12px; align-items: center;">
                        <span style="display: flex; align-items: center;"><span style="display:inline-block; width:8px; height:8px; background:var(--color-role-sender); border-radius:50%; margin-right:4px;"></span>Absenderin</span>
                        <span style="display: flex; align-items: center;"><span style="display:inline-block; width:8px; height:8px; background:var(--color-role-mentioned); border-radius:50%; margin-right:4px;"></span>Erwähnt</span>
                        <span style="display: flex; align-items: center;"><span style="display:inline-block; width:8px; height:8px; background:var(--color-role-both); border-radius:50%; margin-right:4px;"></span>Beides</span>
                        <span style="display: flex; align-items: center;"><span style="display:inline-block; width:8px; height:8px; background:var(--color-role-indirect); border-radius:50%; margin-right:4px;"></span>SNDB</span>
                     </div>
                </div>

                <div class="table-wrapper">
                    <table id="data-table">
                        <thead>
                            <tr id="table-headers">
                                <!-- Dynamic headers based on mode -->
                            </tr>
                        </thead>
                        <tbody id="table-body">
                            <!-- Dynamic rows -->
                        </tbody>
                    </table>
                </div>
            </section>

            <!-- Right: Detail/Context Panel -->
            <aside class="detail-panel">
                <div id="person-detail" class="person-detail">
                    <p class="empty-state">Wähle eine Person aus der Tabelle</p>
                </div>
            </aside>
        </main>
    </div>

    <!-- noUiSlider JS -->
    <script src="https://unpkg.com/nouislider@15.7.1/dist/nouislider.min.js"></script>

    <!-- Load basket manager first -->
    <script src="../js/basket-manager.js"></script>

    <script type="module" src="js/app.js"></script>
</body>
</html>
