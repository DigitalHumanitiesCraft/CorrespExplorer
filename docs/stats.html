<!DOCTYPE html>
<html lang="de">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="Interaktive Analyse der 448 Frauen in Goethes Briefkorrespondenz">
    <title>Brief-Explorer - HerData</title>
    <link rel="icon" type="image/svg+xml" href="favicon.svg">

    <!-- Font Awesome Icons -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.1/css/all.min.css" />

    <link rel="stylesheet" href="css/style.css">
    <link rel="stylesheet" href="css/search.css">
    <link rel="stylesheet" href="css/stats.css">
</head>
<body>
    <!-- Global Navigation Placeholder -->
    <div id="navbar-placeholder"></div>

    <!-- Main Container -->
    <div class="container">
        <div class="content-wrapper">
            <!-- Sidebar with Timeline Filter -->
            <aside class="sidebar" role="complementary" aria-label="Filteroptionen">
                <!-- Stats Cards -->
                <div class="stats-cards">
                    <a href="stats.html" class="stat-card stat-card-clickable" data-tooltip="Statistische Analyse">
                        <div class="stat-value">1.793</div>
                        <div class="stat-label">Briefe</div>
                    </a>
                    <a href="synthesis/index.html" class="stat-card stat-card-clickable" data-tooltip="Detaillierte Personenliste">
                        <div class="stat-value">448</div>
                        <div class="stat-label">Frauen</div>
                    </a>
                    <a href="places.html" class="stat-card stat-card-clickable" data-tooltip="Zur Ortsliste">
                        <div class="stat-value">227</div>
                        <div class="stat-label">Orte</div>
                    </a>
                </div>

                <!-- Timeline Filter in Sidebar -->
                <div class="filter-group" role="group" aria-labelledby="filter-time-heading">
                    <h4 id="filter-time-heading">Zeitfilter</h4>
                    <div class="timeline-mode-toggle">
                        <button class="mode-btn active" data-mode="correspondence">Korrespondenz</button>
                        <button class="mode-btn" data-mode="lifespan">Lebensdaten</button>
                    </div>
                    <div id="master-timeline" class="timeline-chart-sidebar"></div>
                    <div class="timeline-info-sidebar">
                        <span id="timeline-selection">Gesamter Zeitraum</span>
                        <button id="reset-timeline" class="btn-reset-small">Zurücksetzen</button>
                    </div>
                </div>

                <!-- Activity Filter in Sidebar -->
                <div class="filter-group" role="group" aria-labelledby="filter-activity-heading">
                    <h4 id="filter-activity-heading">Briefaktivität</h4>
                    <div class="activity-checkboxes">
                        <label class="checkbox-label">
                            <input type="checkbox" class="activity-checkbox" value="sender" checked>
                            <span>Absenderin</span>
                        </label>
                        <label class="checkbox-label">
                            <input type="checkbox" class="activity-checkbox" value="mentioned" checked>
                            <span>Erwähnt</span>
                        </label>
                        <label class="checkbox-label">
                            <input type="checkbox" class="activity-checkbox" value="both" checked>
                            <span>Beides</span>
                        </label>
                        <label class="checkbox-label">
                            <input type="checkbox" class="activity-checkbox" value="indirect" checked>
                            <span>Nur SNDB</span>
                        </label>
                    </div>
                </div>
            </aside>

            <!-- Main Content -->
            <main class="main-content explorer-main" role="main">
                <!-- Active Filters Display -->
                <div id="active-filters" class="active-filters" style="display: none;">
                    <span class="filter-label">Aktive Filter:</span>
                    <div id="filter-chips"></div>
                    <div class="filter-actions">
                        <a href="#" id="view-persons-btn" class="btn-view-persons">
                            <span id="view-persons-count">448</span> Personen anzeigen →
                        </a>
                        <button id="add-filtered-to-basket" class="btn-add-filtered" title="Gefilterte Personen zum Wissenskorb hinzufügen">
                            <i class="fas fa-bookmark"></i>
                            <span id="add-filtered-count">0</span> zum Wissenskorb
                        </button>
                    </div>
                </div>

                <!-- Chart Grid: Full-width Treemap + 2 Charts (Phase 2d) -->
            <div class="explorer-grid-phase2d">
                <!-- Chart 1: Berufsverteilung (Full Width) -->
                <section class="explorer-card explorer-card-full">
                    <div class="explorer-card-header">
                        <h2>Berufsverteilung</h2>
                        <div class="explorer-card-actions">
                            <button class="btn-export" data-export="occupations" data-format="csv" aria-label="Als CSV exportieren">CSV</button>
                            <button class="btn-export" data-export="occupations" data-format="png" aria-label="Als PNG exportieren">PNG</button>
                        </div>
                    </div>
                    <div class="explorer-card-body">
                        <div id="chart-occupations" class="chart-container"></div>
                        <p class="chart-note"><span id="note-occupations">207 von 448 Frauen (46%) haben Berufsangaben</span></p>
                    </div>
                </section>

                <!-- Chart 2: Geografische Zentren -->
                <section class="explorer-card">
                    <div class="explorer-card-header">
                        <h2>Geografische Zentren</h2>
                        <div class="explorer-card-actions">
                            <button class="btn-export" data-export="places" data-format="csv" aria-label="Als CSV exportieren">CSV</button>
                            <button class="btn-export" data-export="places" data-format="png" aria-label="Als PNG exportieren">PNG</button>
                        </div>
                    </div>
                    <div class="explorer-card-body">
                        <div id="chart-places" class="chart-container"></div>
                        <p class="chart-note"><span id="note-places">227 Frauen mit Ortsangaben (171 verschiedene Orte)</span></p>
                    </div>
                </section>

                <!-- Chart 3: Generationen -->
                <section class="explorer-card">
                    <div class="explorer-card-header">
                        <h2>Generationen</h2>
                        <div class="explorer-card-actions">
                            <button class="btn-export" data-export="cohorts" data-format="csv" aria-label="Als CSV exportieren">CSV</button>
                            <button class="btn-export" data-export="cohorts" data-format="png" aria-label="Als PNG exportieren">PNG</button>
                        </div>
                    </div>
                    <div class="explorer-card-body">
                        <div id="chart-cohorts" class="chart-container"></div>
                        <p class="chart-note"><span id="note-cohorts">407 Frauen mit Lebensdaten</span></p>
                    </div>
                </section>

            </div>
        </main>
        </div>

        <footer class="stats-footer">
            <p>Datenstand: SNDB Oktober 2025 | 448 Frauen | 1.793 Briefe</p>
        </footer>
    </div>

    <!-- Scripts -->
    <script src="https://cdn.jsdelivr.net/npm/echarts@5.5.0/dist/echarts.min.js"></script>
    <!-- Load basket manager -->
    <script src="js/basket-manager.js"></script>
    <script src="js/stats.js" type="module"></script>
</body>
</html>
