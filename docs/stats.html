<!DOCTYPE html>
<html lang="de">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="Interaktive Analyse der 448 Frauen in Goethes Briefkorrespondenz">
    <title>Brief-Explorer - HerData</title>
    <link rel="icon" type="image/svg+xml" href="favicon.svg">

    <!-- Font Awesome Icons -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">

    <link rel="stylesheet" href="css/style.css">
    <link rel="stylesheet" href="css/components.css">
    <link rel="stylesheet" href="css/search.css">
    <link rel="stylesheet" href="css/stats.css">
</head>
<body>
    <!-- Global Navigation Placeholder -->
    <div id="navbar-placeholder"></div>

    <!-- Mobile Filter Bar -->
    <div class="mobile-filter-bar">
        <div class="filter-row">
            <div class="role-toggles">
                <button class="role-toggle active" data-role="sender" title="Frauen, die Briefe an Goethe geschrieben haben">Absenderin</button>
                <button class="role-toggle active" data-role="mentioned" title="Frauen, die in Briefen erwaehnt wurden">Erwaehnt</button>
                <button class="role-toggle active" data-role="both" title="Frauen, die sowohl Briefe schrieben als auch erwaehnt wurden">Beides</button>
                <button class="role-toggle active" data-role="indirect" title="Frauen nur aus biografischen Quellen (SNDB), nicht in Briefen">SNDB</button>
            </div>
        </div>
        <div class="filter-row">
            <div class="mobile-search">
                <i class="fas fa-search"></i>
                <input type="text" id="mobile-search-input" placeholder="Name suchen...">
            </div>
            <div class="result-count"><strong id="mobile-result-count">448</strong> Personen</div>
        </div>
    </div>

    <!-- Main Container -->
    <div class="container">
        <div class="content-wrapper">
            <!-- Sidebar with Timeline Filter -->
            <aside class="sidebar" role="complementary" aria-label="Filteroptionen">
                <!-- Stats Cards -->
                <div class="stats-cards">
                    <a href="stats.html" class="stat-card stat-card-clickable" title="Statistische Analyse">
                        <div class="stat-value">1.793</div>
                        <div class="stat-label">Briefe</div>
                    </a>
                    <a href="synthesis.html" class="stat-card stat-card-clickable" title="Detaillierte Personenliste">
                        <div class="stat-value">448</div>
                        <div class="stat-label">Frauen</div>
                    </a>
                    <a href="places.html" class="stat-card stat-card-clickable" title="Zur Ortsliste">
                        <div class="stat-value">227</div>
                        <div class="stat-label">Orte</div>
                    </a>
                </div>

                <!-- Timeline Filter in Sidebar -->
                <div class="filter-group" role="group" aria-labelledby="filter-time-heading">
                    <h4 id="filter-time-heading" title="Filtert nach Jahren mit Briefaktivitaet">Zeitfilter</h4>
                    <div id="master-timeline" class="timeline-chart-sidebar"></div>
                    <div class="timeline-info-sidebar">
                        <span id="timeline-selection">Gesamter Zeitraum</span>
                        <button id="reset-timeline" class="btn-reset-small">Zuruecksetzen</button>
                    </div>
                </div>

                <!-- Activity Filter in Sidebar -->
                <div class="filter-group" role="group" aria-labelledby="filter-activity-heading">
                    <h4 id="filter-activity-heading">Briefaktivitaet</h4>
                    <div class="activity-checkboxes">
                        <label class="checkbox-label">
                            <input type="checkbox" class="activity-checkbox" value="sender" checked>
                            <span>Absenderin</span>
                        </label>
                        <label class="checkbox-label">
                            <input type="checkbox" class="activity-checkbox" value="mentioned" checked>
                            <span>Erwaehnt</span>
                        </label>
                        <label class="checkbox-label">
                            <input type="checkbox" class="activity-checkbox" value="both" checked>
                            <span>Beides</span>
                        </label>
                        <label class="checkbox-label">
                            <input type="checkbox" class="activity-checkbox" value="indirect" checked>
                            <span>Nur SNDB</span>
                        </label>
                    </div>
                </div>

                <!-- Context Info -->
                <div class="filter-group sidebar-info">
                    <h4>Ueber diese Daten</h4>
                    <p class="info-text">
                        448 Frauen aus Goethes Korrespondenz (SNDB). Berufe aus der GND in 6 Kategorien:
                    </p>
                    <ul class="info-list category-legend">
                        <li><span class="dot" style="background:#27ae60"></span>Literarisch</li>
                        <li><span class="dot" style="background:#2980b9"></span>Kuenstlerisch</li>
                        <li><span class="dot" style="background:#e67e22"></span>Musikalisch</li>
                        <li><span class="dot" style="background:#8e44ad"></span>Hof/Adel</li>
                        <li><span class="dot" style="background:#16a085"></span>Bildung</li>
                        <li><span class="dot" style="background:#7f8c8d"></span>Sonstige</li>
                    </ul>
                    <h4>Interaktion</h4>
                    <ul class="info-list">
                        <li>Klick auf Kachel/Balken filtert</li>
                        <li>Hover zeigt Details</li>
                        <li>Timeline: Ziehen zum Einschraenken</li>
                    </ul>
                </div>
            </aside>

            <!-- Main Content -->
            <main class="main-content explorer-main" role="main">
                <!-- Active Filters Display -->
                <div id="active-filters" class="active-filters" style="display: none;">
                    <span class="filter-label">Aktive Filter:</span>
                    <div id="filter-chips"></div>
                    <div class="filter-actions">
                        <a href="#" id="view-persons-btn" class="btn-view-persons">
                            <span id="view-persons-count">448</span> Personen anzeigen →
                        </a>
                        <button id="add-filtered-to-basket" class="btn-add-filtered" title="Gefilterte Personen zum Wissenskorb hinzufügen">
                            <i class="fas fa-bookmark"></i>
                            <span id="add-filtered-count">0</span> zum Wissenskorb
                        </button>
                    </div>
                </div>

                <!-- Chart Grid: Full-width Treemap + 2 Charts (Phase 2d) -->
            <div class="explorer-grid-phase2d">
                <!-- Chart 1: Berufsverteilung (Full Width) -->
                <section class="explorer-card explorer-card-full">
                    <div class="explorer-card-header">
                        <h2>Berufsverteilung</h2>
                    </div>
                    <div class="explorer-card-body">
                        <div id="chart-occupations" class="chart-container"></div>
                        <p class="chart-note"><span id="note-occupations">207 von 448 Frauen (46%) haben Berufsangaben</span></p>
                    </div>
                </section>

                <!-- Chart 2: Geografische Zentren -->
                <section class="explorer-card">
                    <div class="explorer-card-header">
                        <h2>Geografische Zentren</h2>
                    </div>
                    <div class="explorer-card-body">
                        <div id="chart-places" class="chart-container"></div>
                        <p class="chart-note"><span id="note-places">227 Frauen mit Ortsangaben (171 verschiedene Orte)</span></p>
                    </div>
                </section>

                <!-- Chart 3: Generationen -->
                <section class="explorer-card">
                    <div class="explorer-card-header">
                        <h2>Generationen</h2>
                    </div>
                    <div class="explorer-card-body">
                        <div id="chart-cohorts" class="chart-container"></div>
                        <p class="chart-note"><span id="note-cohorts">407 Frauen mit Lebensdaten</span></p>
                    </div>
                </section>

            </div>

        </main>
        </div>

        <footer class="stats-footer">
            <p>Datenstand: SNDB Oktober 2025 | 448 Frauen | 1.793 Briefe</p>
        </footer>
    </div>

    <!-- Scripts -->
    <script src="https://cdn.jsdelivr.net/npm/echarts@5.5.0/dist/echarts.min.js"></script>
    <!-- Load basket manager -->
    <script src="js/basket-manager.js"></script>
    <script src="js/mobile-filter.js"></script>
    <script src="js/stats.js" type="module"></script>
</body>
</html>
