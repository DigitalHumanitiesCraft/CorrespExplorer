<!DOCTYPE html>
<html lang="de">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="HerData visualisiert 448 Frauen in der Briefkorrespondenz von Johann Wolfgang von Goethe (1762-1824)">
    <title>HerData - Frauen in Goethes Briefkorrespondenz</title>
    <link rel="icon" type="image/svg+xml" href="favicon.svg">

    <!-- MapLibre GL JS CSS -->
    <link rel="stylesheet" href="https://unpkg.com/maplibre-gl@4.7.1/dist/maplibre-gl.css" />

    <!-- noUiSlider CSS -->
    <link rel="stylesheet" href="https://unpkg.com/nouislider@15.7.1/dist/nouislider.min.css" />

    <!-- Font Awesome Icons -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.1/css/all.min.css" />

    <link rel="stylesheet" href="css/style.css">
    <link rel="stylesheet" href="css/search.css">
    <link rel="stylesheet" href="css/debug.css">
</head>
<body>
    <!-- Global Navigation Placeholder -->
    <div id="navbar-placeholder"></div>

    <!-- Main Container -->
    <div class="container">
        <div class="content-wrapper">
            <!-- Sidebar Filters -->
            <aside class="sidebar" role="complementary" aria-label="Filteroptionen">
            <!-- Stats Cards -->
            <div class="stats-cards">
                <a href="stats.html" class="stat-card stat-card-clickable" data-tooltip="Zum Brief-Explorer">
                    <div class="stat-value">1.793</div>
                    <div class="stat-label">Briefe</div>
                </a>
                <a href="synthesis/index.html" class="stat-card stat-card-clickable" data-tooltip="Detaillierte Personenliste">
                    <div class="stat-value">448</div>
                    <div class="stat-label">Frauen</div>
                </a>
                <a href="places.html" class="stat-card stat-card-clickable" data-tooltip="Zur Ortsliste">
                    <div class="stat-value">227</div>
                    <div class="stat-label">Orte</div>
                </a>
            </div>

            <!-- Activity and Occupation Filters - Two Columns -->
            <div class="filter-group-row">
                <!-- Letter Activity Filter -->
                <div class="filter-group filter-group-half" role="group" aria-labelledby="filter-activity-heading">
                    <h4 id="filter-activity-heading">Aktivität</h4>
                    <label><input type="checkbox" name="role" value="sender" checked aria-describedby="filter-activity-heading"> Absenderin</label>
                    <label><input type="checkbox" name="role" value="mentioned" checked aria-describedby="filter-activity-heading"> Erwähnt</label>
                    <label><input type="checkbox" name="role" value="both" checked aria-describedby="filter-activity-heading"> Beides</label>
                    <label><input type="checkbox" name="role" value="indirect" aria-describedby="filter-activity-heading"> Nur SNDB</label>
                </div>

                <!-- Occupation Groups Filter -->
                <div class="filter-group filter-group-half" role="group" aria-labelledby="filter-occupation-heading">
                    <h4 id="filter-occupation-heading">Berufsgruppe</h4>
                    <label><input type="checkbox" name="occupation" value="artistic" checked aria-describedby="filter-occupation-heading"> Künstlerisch</label>
                    <label><input type="checkbox" name="occupation" value="literary" checked aria-describedby="filter-occupation-heading"> Literarisch</label>
                    <label><input type="checkbox" name="occupation" value="musical" checked aria-describedby="filter-occupation-heading"> Musikalisch</label>
                    <label><input type="checkbox" name="occupation" value="court" checked aria-describedby="filter-occupation-heading"> Hof/Adel</label>
                    <label><input type="checkbox" name="occupation" value="education" checked aria-describedby="filter-occupation-heading"> Bildung</label>
                    <label><input type="checkbox" name="occupation" value="other" checked aria-describedby="filter-occupation-heading"> Sonstiges</label>
                    <label><input type="checkbox" name="occupation" value="none" checked aria-describedby="filter-occupation-heading"> Kein Beruf angegeben</label>
                </div>
            </div>

            <!-- Time Period Filter -->
            <div class="filter-group" role="group" aria-labelledby="filter-time-heading">
                <h4 id="filter-time-heading">Zeitfilter</h4>
                <div class="time-filter-tabs">
                    <button class="time-filter-tab active" data-mode="correspondence">Korrespondenz</button>
                    <button class="time-filter-tab" data-mode="lifespan">Lebensdaten</button>
                </div>
                <div id="year-range-slider" aria-label="Jahr-Bereich wählen" role="slider" aria-valuemin="1762" aria-valuemax="1824"></div>
                <div class="year-range-display">
                    <span id="year-range-text" aria-live="polite">1762 – 1824</span>
                </div>
            </div>

            <!-- Place Type and Network Type Filters - Two Columns -->
            <div class="filter-group-row">
                <!-- Place Type Filter -->
                <div class="filter-group filter-group-half" role="group" aria-labelledby="filter-place-heading">
                    <h4 id="filter-place-heading">Ortstyp</h4>
                    <label><input type="checkbox" name="place-type" value="Wirkungsort" checked aria-describedby="filter-place-heading"> Wirkungsort</label>
                    <label><input type="checkbox" name="place-type" value="Geburtsort" checked aria-describedby="filter-place-heading"> Geburtsort</label>
                    <label><input type="checkbox" name="place-type" value="Sterbeort" checked aria-describedby="filter-place-heading"> Sterbeort</label>
                    <label><input type="checkbox" name="place-type" value="Wohnort" checked aria-describedby="filter-place-heading"> Wohnort</label>
                </div>

                <!-- Network Type Filter -->
                <div class="filter-group filter-group-half" role="group" aria-labelledby="filter-network-heading">
                    <h4 id="filter-network-heading">Netzwerk-Typ</h4>
                    <label><input type="checkbox" name="network-type" value="Familie" checked aria-describedby="filter-network-heading"> <span class="legend-line" style="background: #D0388C; display: inline-block; width: 20px; height: 3px; vertical-align: middle;"></span> Familie</label>
                    <label><input type="checkbox" name="network-type" value="Beruflich" checked aria-describedby="filter-network-heading"> <span class="legend-line" style="background: #147D7E; display: inline-block; width: 20px; height: 3px; vertical-align: middle;"></span> Beruflich</label>
                    <label><input type="checkbox" name="network-type" value="Sozial" checked aria-describedby="filter-network-heading"> <span class="legend-line" style="background: #2E7D32; display: inline-block; width: 20px; height: 3px; vertical-align: middle;"></span> Sozial</label>
                    <label><input type="checkbox" name="network-type" value="Korrespondenz" checked aria-describedby="filter-network-heading"> <span class="legend-line" style="background: #6C5CE7; display: inline-block; width: 20px; height: 3px; vertical-align: middle;"></span> Korrespondenz</label>
                </div>
            </div>

            <!-- Map Legend - Cluster Colors Only (Network types shown in filter above) -->
            <div class="filter-group" role="region" aria-labelledby="legend-heading">
                <h4 id="legend-heading">Cluster-Farben</h4>

                <div class="legend-item">
                    <span class="legend-color" style="background: #2c5f8d;" aria-hidden="true"></span>
                    <span>Überwiegend geschrieben (>50%)</span>
                </div>
                <div class="legend-item">
                    <span class="legend-color" style="background: #6c757d;" aria-hidden="true"></span>
                    <span>Überwiegend erwähnt (>50%)</span>
                </div>
                <div class="legend-item">
                    <span class="legend-color" style="background: #2d6a4f;" aria-hidden="true"></span>
                    <span>Gemischt</span>
                </div>
                <p class="legend-hint">Hover über Marker/Cluster zeigt Netzwerk-Verbindungen</p>
            </div>

            <div class="filter-buttons">
                <button id="select-all-filters" aria-label="Alle Filter auswählen">Alle auswählen</button>
                <button id="reset-filters" aria-label="Alle Filter zurücksetzen">Alle zurücksetzen</button>
            </div>
        </aside>

        <!-- Main Content -->
        <main class="main-content" role="main">
            <div id="map-view" class="tab-content active">
                <div id="map" role="application" aria-label="Interaktive Karte der Frauen"></div>
                <div id="loading" role="status" aria-live="polite">Daten werden geladen...</div>
            </div>
        </main>

        <!-- Fixed Debug Panel -->
        <aside id="debug-panel" class="debug-panel" role="complementary" aria-label="Debug-Informationen">
            <div class="debug-panel-header">
                <h3><i class="fas fa-code"></i> Debug</h3>
                <button id="debug-panel-close" class="debug-panel-close" aria-label="Debug-Panel schließen">
                    <i class="fas fa-times"></i>
                </button>
            </div>
            <div class="debug-panel-content">
                <!-- Pinned Networks List -->
                <div id="pinned-networks" class="pinned-networks" style="display: none;">
                    <h4><i class="fas fa-thumbtack"></i> Fixierte Netzwerke</h4>
                    <div id="pinned-networks-list" class="pinned-networks-list"></div>
                    <button id="clear-all-pins" class="btn-clear-pins" style="display: none;">
                        <i class="fas fa-times-circle"></i> Alle lösen
                    </button>
                </div>

                <!-- JSON Display -->
                <div id="debug-json" class="debug-json">
                    <p class="debug-placeholder">Hovere über einen Marker, um Details zu sehen</p>
                </div>
            </div>
        </aside>

        <!-- Debug Toggle Button -->
        <button id="debug-toggle" class="debug-toggle" aria-label="Debug-Panel öffnen">
            <i class="fas fa-bug"></i> Debug
        </button>
        </div>
        </div>
    </div>

    <!-- Scripts -->
    <script src="https://unpkg.com/maplibre-gl@4.7.1/dist/maplibre-gl.js"></script>
    <script src="https://unpkg.com/nouislider@15.7.1/dist/nouislider.min.js"></script>
    <script src="js/basket-manager.js"></script>
    <script src="js/debug.js" type="module"></script>
    <script src="js/app.js" type="module"></script>
</body>
</html>
