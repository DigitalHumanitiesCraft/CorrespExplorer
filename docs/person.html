<!DOCTYPE html>
<html lang="de">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Person - HerData</title>

    <!-- MapLibre GL JS for mini-map -->
    <link rel="stylesheet" href="https://unpkg.com/maplibre-gl@4.7.1/dist/maplibre-gl.css">
    <script src="https://unpkg.com/maplibre-gl@4.7.1/dist/maplibre-gl.js"></script>

    <!-- Font Awesome Icons -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.1/css/all.min.css" />

    <link rel="stylesheet" href="css/style.css">
    <link rel="stylesheet" href="css/search.css">
    <link rel="stylesheet" href="css/person-cards.css">
    <link rel="stylesheet" href="css/debug.css">
    <link rel="icon" type="image/svg+xml" href="favicon.svg">
</head>
<body>
    <!-- Global Navigation Placeholder -->
    <div id="navbar-placeholder"></div>

    <!-- Loading State -->
    <div id="loading" class="loading-message" role="status" aria-live="polite">Person wird geladen...</div>

    <!-- Person Not Found -->
    <div id="not-found" class="error-message" role="alert" style="display: none;">
        <h2>Person nicht gefunden</h2>
        <p>Die angeforderte Person konnte nicht gefunden werden.</p>
        <a href="index.html">← Zurück zur Karte</a>
    </div>

    <!-- Main Content -->
    <div id="person-content" class="person-page-cards" style="display: none;">
        <!-- Person Header -->
        <header class="person-header" role="banner">
            <div class="person-header-top">
                <h1 id="person-name"></h1>
                <button id="person-basket-btn" class="btn-basket-toggle" title="Zum Wissenskorb hinzufügen">
                    <i class="fas fa-bookmark"></i>
                    <span id="basket-btn-text">Zum Wissenskorb</span>
                </button>
            </div>
            <div class="person-dates" id="person-dates" aria-label="Lebensdaten"></div>
            <div class="person-badges" id="person-badges" role="list" aria-label="Normdaten-Kennzeichnungen"></div>
        </header>

        <!-- Stats Overview -->
        <section class="stats-cards">
            <div class="stat-card">
                <div class="stat-value" id="stat-letters">0</div>
                <div class="stat-label">Briefe gesendet</div>
            </div>
            <div class="stat-card">
                <div class="stat-value" id="stat-mentions">0</div>
                <div class="stat-label">Erwähnungen</div>
            </div>
            <div class="stat-card">
                <div class="stat-value" id="stat-places">0</div>
                <div class="stat-label">Orte</div>
            </div>
            <div class="stat-card">
                <div class="stat-value" id="stat-occupations">0</div>
                <div class="stat-label">Berufe</div>
            </div>
        </section>

        <!-- Two-Column Layout: Content Left, Raw Data Right -->
        <div class="person-layout-wrapper">
            <!-- Left Column: Content Cards -->
            <div class="cards-container">
                <!-- Biography Card -->
            <section class="content-card" id="biography-card">
                <h2>Biographie</h2>
                <div id="biography-content" class="card-content">
                    <p class="placeholder-text">Keine Biographie verfügbar.</p>
                </div>
            </section>

            <!-- Letters Card -->
            <section class="content-card" id="letters-card">
                <h2>Korrespondenz</h2>
                <div id="letters-content" class="card-content">
                    <!-- Populated by JS -->
                </div>
            </section>

            <!-- Places Card with Map -->
            <section class="content-card" id="places-card">
                <h2>Orte</h2>
                <div id="places-list" class="card-content places-list">
                    <!-- Populated by JS -->
                </div>
                <div id="places-map" class="mini-map"></div>
            </section>

            <!-- Occupations Card -->
            <section class="content-card" id="occupations-card">
                <h2>Berufe und Tätigkeiten</h2>
                <div id="occupations-content" class="card-content">
                    <!-- Populated by JS -->
                </div>
            </section>

            <!-- Relations Card -->
            <section class="content-card" id="relations-card" style="display: none;">
                <h2>Netzwerk-Verbindungen</h2>
                <div id="relations-content" class="card-content">
                    <!-- Populated by JS -->
                </div>
            </section>

            <!-- Additional Biographies Card -->
            <section class="content-card" id="additional-biographies-card" style="display: none;">
                <h2>Zusätzliche biografische Quellen</h2>
                <div id="additional-biographies-content" class="card-content">
                    <!-- Populated by JS -->
                </div>
            </section>

            <!-- Sources Card -->
            <section class="content-card" id="sources-card">
                <h2>Quellen und Normdaten</h2>
                <div id="sources-content" class="card-content">
                    <!-- Populated by JS -->
                </div>

                <h3 style="margin-top: var(--space-xl);">Datenqualität</h3>
                <div id="data-quality" class="card-content">
                    <!-- Populated by JS -->
                </div>

                <h3 style="margin-top: var(--space-xl);">Zitierhinweis</h3>
                <div id="citation-content" class="card-content">
                    <!-- Populated by JS -->
                </div>
            </section>
            </div>
            <!-- End Left Column -->

            <!-- Right Column: Raw JSON Data (Sticky) -->
            <aside class="raw-data-sidebar">
                <div class="raw-data-sidebar-inner">
                    <h2>Raw Data (JSON)</h2>
                    <div id="raw-data-container" class="raw-data-display"></div>
                </div>
            </aside>
            <!-- End Right Column -->
        </div>
        <!-- End Two-Column Layout -->
    </div>

    <!-- Load basket manager -->
    <script src="js/basket-manager.js"></script>
    <script src="js/person.js?v=4" type="module"></script>
</body>
</html>
